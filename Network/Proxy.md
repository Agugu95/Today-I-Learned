# Proxy  
- 프록시란?
- 어디에 쓰나?  
내가 알기로 프록시는 서버 앞에 위치할 수 있고 서버의 요청을 대신 받아 처리할 수 있다.  
진짜 서버는 프록시에 의해 숨겨진다.  
프록시가 요청을 1차로 받아 처리하기에 필터링과 같은 역할을 할 수 있다. (DDOS방어도 가능)  

## 진짜 프록시란?  
- Proxy  
프록시는 웹의 요청을 수행하는 중개 서버로 클라이언트이면서 동시에 서버의 역할을 수행한다.  
![image](https://user-images.githubusercontent.com/38939634/65385276-d667af00-dd67-11e9-8079-9f79d45aa9a1.png)  
클라이언트로부터 요청을 받기도 하고 요청을 받고, 요청을 서버로 보내고, 요청의 반환을 다시 클라이언트로 보낸다.  

- Proxy vs. Gateway  
프록시와 게이트웨이의 가장 큰 차이는 프록시는 동일한 프로토콜을 사용하는 사이를 연결  
게이트웨이는 서로 다른 프로토콜을 사용하는 사이를 연결한다는거다.  
그런데 요즘의 프록시 서버의 경우는 SSL 프로토콜, 방화벽, FTP 접근과 같은 다른 프로토콜과의 연결을 지원하기 때문에 게이트웨이의 기능도 가지고 있다.  
  - [nginX (엔진엑스)](https://nginx.org/en/)  
  내가 알기로 가장 많이 쓰이는 프록시 서버 소프트웨어인데 실제로 nignx는   
  SSL and TLS SNI support for TCP와 같은 TCP 확장 기능을 제공한다.  

## 프록시 사용  
- Proxy를 왜 쓰지?  
프록시 서버를 쓰는 이유를 한줄로 요약하면 "안전하고, 성능을 높여주고(캐싱), 비용이 절약된다."  
실제로 프록시가 제공하는 기능
  - 접근 제어/방화벽    
  서버로의 요청은 프록시를 거치므로 리소스에 대한 접근제어와 방화벽 설정이 가능하다.  
  
  - 캐싱  
  역시 프록시를 거치므로 프록시에 캐시된 사본이 존재한다면 요청은 원 서버까지 전달되지 않아도 된다.  
  
  - 리버싱  
  서버로의 요청은 프록시를 거치므로 실제 서버의 모습은 프록시에 가려져 보이지 않는다.  
  마치 클라이언트는 서버와 1:1 통신하는듯이 느끼지만 실제로는 프록시와 통신하고 있다.  
  
  - 라우팅  
  역시 프록시를 통해 라우트를 지정해놓는다면 원하는대로 라우팅이 가능하다.  
  
  - 트랜스코딩  
  실제 서버로 들어오는 요청 포맷을 조정할 수 있다.  
  이미지 포맷의 조절, 영상 포맷 조절같은  
  
- Proxy의 트래픽 처리  
그렇다면 실제로 프록시는 어디에 존재하며 트래픽을 처리할까?  
  - Egress Proxy  
  출구 프록시로 로컬 네트워크가 인터넷으로 연결되는 지점에 존재한다.  
  로컬 네트워크로부터의 모든 트래픽은 출구 프록시를 거치므로 방화벽, 콘텐츠 필터링이 가능하다.  
  
  - Access Proxy  
  접근 프록시는 ISP(인터넷 서비스 제공자)의 Access Network에 위치하며 ISP의 고객들이 자주 사용되는 문서의 사본을 저장하고 빠른 서비스를 제공한다.    
  
  - Reverse Proxy  
  리버스 프록시로 보통 DB와 연결 되어있는 최종 서버에 존재하는데 DB에 접근해야하는 모든 트래픽은 프록시를 거치고  
  마치 프록시가 진짜 서버인척 IP와 Domain을 통해 행세하므로 서버는 숨겨지고 프록시가 실제 서버로 보인다.  
  
  - Network Proxy  
  각 네트워크 라우터 사이에 위치하여 트래픽을 조절하거나 감시하는 프록시다.  

이렇게 각 부분에 요청하는 프록시를 보면 하나의 흐름에서 거치는 프록시는 1개 이상일 수 있다.  
그리고 프록시를 거치지않더라도 서버 혹은 브라우저가 리다이렉션, 인터셉팅을 통해 트래픽을 강제로 프록시로 보낼 수 있다.  
